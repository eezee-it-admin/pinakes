<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_network_client_line_form" model="ir.ui.view">
        <field name="name">Network Client Line</field>
        <field name="model">network.client.line</field>
        <field name="arch" type="xml">
            <form string="Network Client Line">
                <header>
                    <button name="action_line_attachments"
                            type="object"
                            string="All attachments"
                            class="btn-primary"/>
                    <button name="test_http_connection"
                            col="4"
                            type="object"
                            string="Test HTTP Connection"
                            icon="fa-television"
                            class="btn-primary"
                            attrs="{'invisible': [('client_type', '!=', 'http')]}"/>
                    <button name="download_from_http"
                            type="object"
                            string="Download File"
                            icon="fa-download"
                            attrs="{'invisible': [('client_type', '!=', 'http')]}"
                            class="btn-primary"/>
                    <button name="test_ftp_connection"
                            type="object"
                            string="Test FTP Connection"
                            icon="fa-television"
                            attrs="{'invisible': [('client_type', 'not in', ('ftp', 'sftp'))]}"
                            class="btn-primary"/>
                    <button name="download_files"
                            type="object"
                            string="Download File(s)"
                            icon="fa-download"
                            class="btn-primary"
                            attrs="{'invisible': [('client_type', 'not in', ('ftp', 'sftp'))]}"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <field name="action_type" widget="radio"
                               class="oe_edit_only"
                               options="{'horizontal': true}"/>
                        <h1>
                            <field name="name"
                                   placeholder="Client Config line Name"/>
                        </h1>
                    </div>
                    <group colspan="4">
                        <field name="client_id" invisible="1"/>
                        <field name="client_type" invisible="1"/>
                    </group>
                    <group attrs="{'invisible': [('client_type', 'not in', ('ftp', 'sftp'))]}"
                           colspan="4">
                        <field name="upload_path" placeholder="/exported/"
                               attrs="{'invisible': [('action_type', '=', 'download')],
                                'required': [('action_type', '!=', 'download')]}"/>
                        <field name="type_download_link" widget="radio"
                               attrs="{'invisible': [('action_type', '=', 'upload')]}"/>
                        <field name="download_directory"
                               placeholder="/payments/new"
                               attrs="{'invisible': [('action_type', '=', 'upload')], 'required': [('action_type', '!=', 'upload')]}"/>
                        <field name="initial_path" placeholder="payments"
                               attrs="{'invisible': ['|', ('action_type', '=', 'upload'),('type_download_link', '=', 'all')],
                                'required': [('action_type', '!=', 'upload'), ('type_download_link', '!=', 'all')]}"/>
                        <field name="archive_downloaded_files"
                               attrs="{'invisible': [('action_type', '=', 'upload')]}"/>
                        <field name="archive_path"
                               attrs="{'invisible': ['|', ('archive_downloaded_files', '=', False), ('action_type', '=', 'upload')], 'required': [('archive_downloaded_files', '=', True)]}"
                               placeholder="/payment/archived/"/>
                        <field name="delete_downloaded_files"
                               attrs="{'invisible': ['|', ('archive_downloaded_files', '=', True),('action_type', '=', 'upload')]}"/>
                    </group>
                    <group attrs="{'invisible': [('action_type', '=', 'upload')]}">
                        <div>
                            <strong>What to do after downloading files? <field name="next_action"/></strong>
                        </div>
                        <div attrs="{'invisible': [('next_action', '!=', 'action_server')]}">
                            <strong>Lunch this action server <field name="ir_actions_server_id" attrs="{'required': [('next_action', '=', 'action_server')]}"/></strong>
                        </div>
                        <!-- TODO -->
                        <div invisible="1">
                            <strong>Target Model <field name="model_id"/></strong>
                        </div>
                    </group>
                    <notebook
                            attrs="{'invisible': [('client_type', '!=', 'http')]}">
                        <page name="parameters" string="Parameters">
                            <field name="parameter_ids">
                                <tree editable="bottom">
                                    <field name="name"/>
                                    <field name="value"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_network_client_line_tree" model="ir.ui.view">
        <field name="name">Network Client Line Tree</field>
        <field name="model">network.client.line</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="model_id"/>
                <field name="action_type"/>
                <field name="upload_path"/>
                <field name="download_directory"/>
                <field name="delete_downloaded_files"/>
                <field name="archive_downloaded_files"/>
                <field name="archive_path"/>
            </tree>
        </field>
    </record>
</odoo>
